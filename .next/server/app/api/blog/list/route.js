(()=>{var e={};e.id=81,e.ids=[81],e.modules={3040:(e,t,r)=>{"use strict";r.d(t,{q:()=>i});var a=r(56037),n=r.n(a);let o=process.env.MONGODB_URI;async function i(){n().connections[0].readyState||await n().connect(o)}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11245:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>v,routeModule:()=>f,serverHooks:()=>m,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>y});var a={};r.r(a),r.d(a,{GET:()=>d});var n=r(96559),o=r(48088),i=r(37719),s=r(32190),u=r(19854),l=r(41098),c=r(3040),p=r(71217);async function d(e){try{let t=await (0,u.getServerSession)(l.N);if(!t||t.user?.role!=="admin")return s.NextResponse.json({error:"Unauthorized"},{status:401});await (0,c.q)();let{searchParams:r}=new URL(e.url),a=Math.max(1,parseInt(r.get("page")||"1",10)),n=Math.min(100,Math.max(1,parseInt(r.get("limit")||"10",10))),o=(a-1)*n,i=r.get("search")?.toLowerCase()||"",d=r.get("category"),f={};i&&(f.$or=[{title:{$regex:i,$options:"i"}},{author:{$regex:i,$options:"i"}},{content:{$regex:i,$options:"i"}}]),d&&(f.category=d);let g=await p.A.countDocuments(f),y=await p.A.find(f).sort({createdAt:-1}).skip(o).limit(n).lean();return s.NextResponse.json({posts:y,total:g,page:a,limit:n},{status:200})}catch(e){return console.error("[BLOG_LIST_ERROR]",e),s.NextResponse.json({error:"Something went wrong"},{status:500})}}let f=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/blog/list/route",pathname:"/api/blog/list",filename:"route",bundlePath:"app/api/blog/list/route"},resolvedPagePath:"C:\\Users\\DAY\\OneDrive\\Desktop\\Neighborhood\\neighborhood-empowerment-funds\\app\\api\\blog\\list\\route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:g,workUnitAsyncStorage:y,serverHooks:m}=f;function v(){return(0,i.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:y})}},11723:e=>{"use strict";e.exports=require("querystring")},12269:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},12412:e=>{"use strict";e.exports=require("assert")},19854:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={};Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o.default}});var n=r(12269);Object.keys(n).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(a,e))&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))});var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&({}).hasOwnProperty.call(e,o)){var s=n?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,r&&r.set(e,a),a}(r(35426));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}Object.keys(o).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(a,e))&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))})},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32170:(e,t,r)=>{"use strict";r.d(t,{K:()=>i});var a=r(56037),n=r.n(a);let o=new(n()).Schema({name:{type:String,required:!0},email:{type:String,unique:!0,required:!0},hashedPassword:{type:String,default:null},oauthProvider:{type:String,default:null},oauthId:{type:String,default:null},role:{type:String,enum:["user","admin"],default:"user"},avatar:{type:String,default:null}},{timestamps:!0}),i=n().models.User||n().model("User",o)},41098:(e,t,r)=>{"use strict";r.d(t,{N:()=>u});var a=r(36344),n=r(13581),o=r(85663),i=r(3040),s=r(32170);let u={providers:[(0,n.A)({name:"Credentials",credentials:{email:{label:"Email",type:"text"},password:{label:"Password",type:"password"}},async authorize(e){if(!e?.email||!e.password)return null;await (0,i.q)();let t=await s.K.findOne({email:e.email});return t&&t.hashedPassword&&await o.Ay.compare(e.password,t.hashedPassword)?{id:t._id.toString(),name:t.name,email:t.email,role:t.role,avatar:t.avatar}:null}}),(0,a.A)({clientId:process.env.GOOGLE_CLIENT_ID??"",clientSecret:process.env.GOOGLE_CLIENT_SECRET??""})],pages:{signIn:"/signin",signOut:"/signout"},session:{strategy:"jwt"},secret:process.env.NEXTAUTH_SECRET,callbacks:{async signIn({user:e,account:t,profile:r}){if(t?.provider==="google"){await (0,i.q)();let t=await s.K.findOne({email:e.email});t||(t=await s.K.create({name:e.name,email:e.email,hashedPassword:null,oauthProvider:"google",oauthId:r?.sub||void 0,role:"user",avatar:e.image??void 0})),e.id=t._id.toString(),e.role=t.role,e.avatar=t.avatar??void 0}return!0},jwt:async({token:e,user:t})=>(t&&(e.id=t.id,e.email=t.email??void 0,e.name=t.name??void 0,e.role=t.role??void 0,e.avatar=t.avatar??void 0),e),session:async({session:e,token:t})=>(e.user&&(e.user.id=t.id,e.user.email=t.email??void 0,e.user.name=t.name??void 0,e.user.role=t.role??void 0,e.user.avatar=t.avatar??void 0),e)}}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56037:e=>{"use strict";e.exports=require("mongoose")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71217:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(56037);let n=new a.Schema({title:{type:String,required:!0},author:{type:String,required:!0},coverImage:{type:String,required:!0},content:{type:String,required:!0},category:[{type:a.Schema.Types.ObjectId,ref:"Category",required:!0}],readTime:{type:Number,required:!0},featured:{type:Boolean,default:!1}},{timestamps:!0}),o=a.models.Blog||(0,a.model)("Blog",n)},74075:e=>{"use strict";e.exports=require("zlib")},76926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return u}});let a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=o?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,r&&r.set(e,a),a}(r(61120));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}let o={current:null},i="function"==typeof a.cache?a.cache:e=>e,s=console.warn;function u(e){return function(...t){s(e(...t))}}i(e=>{try{s(o.current)}finally{o.current=null}})},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[719,580,663,589],()=>r(11245));module.exports=a})();