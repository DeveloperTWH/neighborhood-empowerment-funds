(()=>{var e={};e.id=8563,e.ids=[8563],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11199:(e,t,r)=>{Promise.resolve().then(r.bind(r,65527))},14952:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(62688).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29351:(e,t,r)=>{Promise.resolve().then(r.bind(r,82340))},33873:e=>{"use strict";e.exports=require("path")},47033:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(62688).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},65527:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(60687),a=r(85814),o=r.n(a),n=r(43210),i=r(62688);let l=(0,i.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),d=(0,i.A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var c=r(88233),p=r(47033),h=r(14952);function u(){let[e,t]=(0,n.useState)([]),[r,a]=(0,n.useState)(!0),[i,u]=(0,n.useState)(""),[m,g]=(0,n.useState)(""),[x,f]=(0,n.useState)([]),[b,y]=(0,n.useState)(""),[v,j]=(0,n.useState)(!1),[w,N]=(0,n.useState)(1),[k,A]=(0,n.useState)(1);(0,n.useCallback)(async()=>{a(!0);try{let e=new URLSearchParams;m&&e.append("search",m),b&&e.append("category",b),e.append("page",w.toString()),e.append("limit","9");let r=await fetch(`/api/blog/list?${e.toString()}`),s=await r.json();t(s.posts),A(Math.ceil(s.total/9))}catch(e){console.error("Failed to fetch blog posts",e)}finally{a(!1)}},[m,b,w]);let _=async e=>{if(confirm("Are you sure you want to delete this post?"))try{(await fetch(`/api/blog/delete/${e}`,{method:"DELETE"})).ok?t(t=>t.filter(t=>t._id!==e)):alert("Failed to delete post.")}catch(e){console.error(e),alert("Error deleting post.")}},C=async(r,s)=>{j(!0);try{if(!s&&e.filter(e=>e.featured).length>=6)return void alert("You can only feature up to 6 blog posts.");if(!(await fetch(`/api/blog/feature/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({featured:!s})})).ok)return void alert("Failed to update featured status.");t(e=>e.map(e=>e._id===r?{...e,featured:!s}:e))}catch(e){console.error("Feature toggle error:",e),alert("Something went wrong while updating.")}finally{j(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen p-4 sm:p-8 bg-gray-100",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Manage Blog Posts"}),(0,s.jsxs)(o(),{href:"/admin/blog/new",className:"inline-flex items-center bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:[(0,s.jsx)(l,{className:"mr-2 h-5 w-5"}),"Add New Post"]})]}),(0,s.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[(0,s.jsxs)("select",{className:"w-full sm:w-1/4 px-4 py-2 border rounded-lg",value:b,onChange:e=>{y(e.target.value),N(1)},children:[(0,s.jsx)("option",{value:"",children:"All Categories"}),x.map(e=>(0,s.jsx)("option",{value:e._id,children:e.name},e._id))]}),(0,s.jsx)("input",{type:"text",placeholder:"Search by title, author or content...",value:i,onChange:e=>{u(e.target.value),N(1)},className:"w-full sm:w-3/4 px-6 py-3 border rounded-lg"})]}),r?(0,s.jsx)("div",{className:"flex items-center justify-center h-48",children:"Loading..."}):0===e.length?(0,s.jsx)("div",{className:"text-center text-gray-500 py-12",children:"No blog posts found."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded shadow p-4 flex flex-col justify-between",children:[(0,s.jsx)("img",{src:e.coverImage,alt:e.title,className:"rounded-md h-40 w-full object-cover mb-3"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:e.title}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mb-1",children:["By ",e.author," • ",new Date(e.createdAt).toLocaleDateString()]}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)("button",{onClick:()=>C(e._id,e.featured),disabled:v,className:`flex items-center justify-center gap-2 px-4 py-1.5 rounded-full text-sm font-medium transition duration-200 shadow-sm ${e.featured?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e.featured?"★ Featured":"☆ Mark as Featured"})}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsxs)(o(),{href:`/admin/blog/${e._id}`,className:"text-blue-600 hover:underline inline-flex items-center",children:[(0,s.jsx)(d,{className:"w-4 h-4 mr-1"})," Edit"]}),(0,s.jsxs)("button",{onClick:()=>_(e._id),className:"text-red-600 hover:underline inline-flex items-center",children:[(0,s.jsx)(c.A,{className:"w-4 h-4 mr-1"})," Delete"]})]})]},e._id))}),(0,s.jsxs)("div",{className:"flex justify-center items-center gap-4 mt-8",children:[(0,s.jsx)("button",{onClick:()=>N(e=>Math.max(1,e-1)),disabled:1===w,className:"px-3 py-1 border rounded hover:bg-gray-200 disabled:opacity-50",children:(0,s.jsx)(p.A,{})}),(0,s.jsxs)("span",{className:"font-medium text-gray-600",children:["Page ",w," of ",k]}),(0,s.jsx)("button",{onClick:()=>N(e=>Math.min(k,e+1)),disabled:w===k,className:"px-3 py-1 border rounded hover:bg-gray-200 disabled:opacity-50",children:(0,s.jsx)(h.A,{})})]})]})]})}},82340:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\DAY\\\\OneDrive\\\\Desktop\\\\Neighborhood\\\\neighborhood-empowerment-funds\\\\app\\\\admin\\\\blog\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\DAY\\OneDrive\\Desktop\\Neighborhood\\neighborhood-empowerment-funds\\app\\admin\\blog\\page.tsx","default")},85539:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>h,tree:()=>d});var s=r(65239),a=r(48088),o=r(88170),n=r.n(o),i=r(30893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d={children:["",{children:["admin",{children:["blog",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,82340)),"C:\\Users\\DAY\\OneDrive\\Desktop\\Neighborhood\\neighborhood-empowerment-funds\\app\\admin\\blog\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"C:\\Users\\DAY\\OneDrive\\Desktop\\Neighborhood\\neighborhood-empowerment-funds\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\Users\\DAY\\OneDrive\\Desktop\\Neighborhood\\neighborhood-empowerment-funds\\app\\admin\\blog\\page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/blog/page",pathname:"/admin/blog",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},88233:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(62688).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[7719,2732,3430],()=>r(85539));module.exports=s})();