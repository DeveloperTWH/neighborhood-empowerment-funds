(()=>{var e={};e.id=5174,e.ids=[5174],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32503:(e,t,r)=>{Promise.resolve().then(r.bind(r,88735))},33873:e=>{"use strict";e.exports=require("path")},49115:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(65239),a=r(48088),o=r(88170),n=r.n(o),i=r(30893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d={children:["",{children:["admin",{children:["blog",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,54341)),"C:\\Users\\DAY\\OneDrive\\Desktop\\Neighborhood\\neighborhood-empowerment-funds\\app\\admin\\blog\\new\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"C:\\Users\\DAY\\OneDrive\\Desktop\\Neighborhood\\neighborhood-empowerment-funds\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\Users\\DAY\\OneDrive\\Desktop\\Neighborhood\\neighborhood-empowerment-funds\\app\\admin\\blog\\new\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/blog/new/page",pathname:"/admin/blog/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},54341:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\DAY\\\\OneDrive\\\\Desktop\\\\Neighborhood\\\\neighborhood-empowerment-funds\\\\app\\\\admin\\\\blog\\\\new\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\DAY\\OneDrive\\Desktop\\Neighborhood\\neighborhood-empowerment-funds\\app\\admin\\blog\\new\\page.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},72255:(e,t,r)=>{Promise.resolve().then(r.bind(r,54341))},75180:()=>{},88735:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var s=r(60687),a=r(16189),o=r(82136),n=r(43210),i=r(7203),l=r(76928),d=r(79801),c=r(37590),u=r(27777),p=r(11922),g=r(69169),m=r(25366),h=r(14290);function b(){let e=(0,a.useRouter)(),{data:t}=(0,o.useSession)(),[r,b]=(0,n.useState)(""),[x,f]=(0,n.useState)(null),[y,v]=(0,n.useState)([]),[j,N]=(0,n.useState)([]),[w,A]=(0,n.useState)(0),[C,k]=(0,n.useState)(!1),[P,_]=(0,n.useState)(!1),D=(0,n.useRef)([]),S=(0,n.useRef)(!1),I=(0,i.hG)({extensions:[l.A,d.Ay],content:""}),O=async e=>{try{let t=new FormData;t.append("coverImage",e);let r=await fetch("/api/blog/upload",{method:"POST",body:t});if(!r.ok)throw Error("Image upload failed");let s=await r.json();D.current.push(s.url),I?.chain().focus().setImage({src:s.url}).run()}catch(e){console.error(e),c.Ay.error("Failed to upload inline image")}},q=async s=>{s.preventDefault();let a=I?.getHTML();if(!j.length)return void c.Ay.error("Please select at least one category");try{let s="";if(x){let e=new FormData;e.append("coverImage",x);let t=await fetch("/api/blog/upload",{method:"POST",body:e});if(!t.ok)throw Error("Cover image upload failed");s=(await t.json()).url}if(!(await fetch("/api/blog/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:r,author:t?.user?.name||"Anonymous",coverImage:s,content:a,category:j,readTime:w,featured:P})})).ok)throw Error("Blog creation failed");c.Ay.success("Blog post submitted!"),S.current=!0,console.log({title:r,author:t?.user?.name||"Anonymous",coverImage:s,content:a,category:j,readTime:w}),e.push("/admin/blog")}catch(e){console.error(e),c.Ay.error("Blog creation failed")}};return(0,s.jsx)("div",{className:"min-h-screen px-4 py-8 bg-gray-100 flex justify-center",children:(0,s.jsxs)("form",{onSubmit:q,className:"bg-white shadow-lg rounded-xl p-8 w-full max-w-3xl space-y-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Add New Blog Post"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"font-medium text-gray-700",children:"Title"}),(0,s.jsx)("input",{type:"text",value:r,onChange:e=>b(e.target.value),required:!0,className:"w-full px-4 py-2 border rounded-lg bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-400"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"font-medium text-gray-700",children:"Cover Image"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>f(e.target.files?.[0]||null),className:"w-full px-4 py-2 border rounded-lg bg-gray-50"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"font-medium text-gray-700",children:"Categories"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("button",{type:"button",className:"w-full text-left px-4 py-2 border rounded-lg bg-gray-50",onClick:()=>k(!C),children:j.length>0?y.filter(e=>j.includes(e._id)).map(e=>e.name).join(", "):"Select categories"}),C&&(0,s.jsx)("div",{className:"absolute z-10 mt-2 w-full bg-white border rounded-lg shadow-lg max-h-48 overflow-auto",children:y.map(e=>(0,s.jsxs)("label",{className:"flex items-center px-4 py-2 hover:bg-gray-100",children:[(0,s.jsx)("input",{type:"checkbox",checked:j.includes(e._id),onChange:()=>{N(t=>t.includes(e._id)?t.filter(t=>t!==e._id):[...t,e._id])},className:"mr-2"}),e.name]},e._id))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"font-medium text-gray-700",children:"Estimated Read Time (minutes)"}),(0,s.jsx)("input",{type:"number",value:w,onChange:e=>A(Number(e.target.value)),min:1,required:!0,className:"w-full px-4 py-2 border rounded-lg bg-gray-50"})]}),I&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 border p-3 rounded-lg bg-gray-50",children:[(0,s.jsx)("button",{type:"button",title:"Bold",onClick:()=>I.chain().focus().toggleBold().run(),className:`toolbar-btn ${I.isActive("bold")?"active":""}`,children:(0,s.jsx)(u.A,{size:16})}),(0,s.jsx)("button",{type:"button",title:"Italic",onClick:()=>I.chain().focus().toggleItalic().run(),className:`toolbar-btn ${I.isActive("italic")?"active":""}`,children:(0,s.jsx)(p.A,{size:16})}),(0,s.jsx)("button",{type:"button",title:"Heading",onClick:()=>I.chain().focus().toggleHeading({level:2}).run(),className:`toolbar-btn ${I.isActive("heading",{level:2})?"active":""}`,children:(0,s.jsx)(g.A,{size:16})}),(0,s.jsx)("button",{type:"button",title:"Bullet List",onClick:()=>I.chain().focus().toggleBulletList().run(),className:`toolbar-btn ${I.isActive("bulletList")?"active":""}`,children:(0,s.jsx)(m.A,{size:16})}),(0,s.jsx)("button",{type:"button",title:"Numbered List",onClick:()=>I.chain().focus().toggleOrderedList().run(),className:`toolbar-btn ${I.isActive("orderedList")?"active":""}`,children:(0,s.jsx)(h.A,{size:16})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"font-medium text-gray-700",children:"Insert Image into Blog Content"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];t&&O(t)},className:"w-full px-4 py-2 border rounded-lg bg-gray-50"})]}),(0,s.jsx)("div",{className:"border rounded-lg bg-white min-h-[200px] p-4",children:(0,s.jsx)(i.$Z,{editor:I})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"font-medium text-gray-700",children:"Featured Post"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",name:"featured",value:"yes",checked:!0===P,onChange:()=>_(!0),className:"accent-indigo-600"}),"Yes"]}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"radio",name:"featured",value:"no",checked:!1===P,onChange:()=>_(!1),className:"accent-indigo-600"}),"No"]})]})]}),(0,s.jsx)("button",{type:"submit",className:"w-full py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700",children:"Submit Blog Post"})]})})}r(75180)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[7719,2732,921,3430],()=>r(49115));module.exports=s})();