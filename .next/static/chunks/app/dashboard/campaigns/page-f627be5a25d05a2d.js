(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[381],{5695:(e,a,t)=>{"use strict";var s=t(8999);t.o(s,"redirect")&&t.d(a,{redirect:function(){return s.redirect}}),t.o(s,"usePathname")&&t.d(a,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(a,{useSearchParams:function(){return s.useSearchParams}})},7527:(e,a,t)=>{Promise.resolve().then(t.bind(t,9594))},9594:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var s=t(5155),l=t(2115),n=t(2108),r=t(6874),i=t.n(r),o=t(5695);let c=["All","Tech","Art","Health","Education"],d=["All","active","completed","canceled","paused"];function u(){var e;let{data:a,status:t}=(0,n.useSession)(),[r,u]=(0,l.useState)([]),[m,x]=(0,l.useState)(!1),[p,h]=(0,l.useState)(1),[g,f]=(0,l.useState)(1),[b,v]=(0,l.useState)("All"),[j,N]=(0,l.useState)("All"),[w,y]=(0,l.useState)(""),[S,k]=(0,l.useState)(""),P=(0,l.useRef)([]),C=(null==a||null==(e=a.user)?void 0:e.id)||"";return((0,l.useEffect)(()=>{let e=setTimeout(()=>{k(w.trim()),h(1)},500);return()=>clearTimeout(e)},[w]),(0,l.useEffect)(()=>{C&&(async()=>{x(!0);let e=new URLSearchParams;e.append("ownerId",C),e.append("page",p.toString()),e.append("limit","9"),"All"!==b&&e.append("category",b),"All"!==j&&e.append("status",j),S&&e.append("search",S);try{let a=await fetch("/api/campaigns?".concat(e.toString()));if(!a.ok)throw Error("Failed to fetch campaigns");let t=await a.json();u(t.campaigns),f(t.totalPages)}catch(e){console.error(e)}finally{x(!1)}})()},[C,p,b,j,S]),"loading"===t)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-white",children:(0,s.jsx)("div",{className:"loader"})}):(C||(0,o.redirect)("/signin"),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-10",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Your Campaigns"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 mb-10",children:[(0,s.jsx)("select",{className:"border rounded px-3 py-2",value:b,onChange:e=>{v(e.target.value),h(1)},children:c.map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)("select",{className:"border rounded px-3 py-2",value:j,onChange:e=>{N(e.target.value),h(1)},children:d.map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)("input",{type:"text",placeholder:"Search campaigns...",className:"border rounded px-3 py-2 flex-grow min-w-[200px]",value:w,onChange:e=>y(e.target.value)})]}),m?(0,s.jsx)("p",{children:"Loading campaigns..."}):0===r.length?(0,s.jsx)("p",{children:"No campaigns found."}):(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-12",children:r.map((e,a)=>{let t=Math.min(100,Math.round(e.amountRaised/e.fundingTarget*100));return(0,s.jsxs)("div",{ref:e=>{e&&(P.current[a]=e)},className:"relative rounded-2xl overflow-hidden shadow-xl text-white h-96 flex flex-col justify-end p-6",style:{backgroundImage:"url('".concat(e.logoUrl||e.image,"')"),backgroundSize:"cover",backgroundPosition:"center"},children:[(0,s.jsx)("div",{className:"bg-gradient-to-t from-black/80 via-black/40 to-transparent absolute inset-0 z-0"}),(0,s.jsxs)("div",{className:"relative z-10 flex flex-col flex-grow justify-end",children:[(0,s.jsx)("p",{className:"font-bold text-xl mb-1",children:e.title}),(0,s.jsx)("p",{className:"text-sm mb-2",children:e.description||e.subtitle||"No description"}),(0,s.jsx)("p",{className:"text-pink-400 text-sm font-semibold mb-1",children:e.platform||"CUSTOM"}),(0,s.jsx)("div",{className:"w-full bg-gray-600 rounded-full h-4 mb-2 overflow-hidden",children:(0,s.jsx)("div",{className:"bg-green-500 h-4 rounded-full transition-all duration-500",style:{width:"".concat(t,"%")}})}),(0,s.jsxs)("p",{className:"text-yellow-300 font-bold text-sm mb-4",children:[t,"% funded"]}),(0,s.jsxs)("p",{className:"text-yellow-300 font-bold text-lg",children:["$ ",e.amountRaised," raised of $",e.fundingTarget]}),(0,s.jsx)(i(),{href:"/dashboard/campaigns/".concat(e._id),className:"mt-4 inline-block bg-yellow-400 text-black px-4 py-2 rounded font-medium text-sm hover:bg-yellow-500 transition",children:"View Details"})]})]},e._id)})}),(0,s.jsxs)("div",{className:"flex justify-center items-center gap-4 mt-12",children:[(0,s.jsx)("button",{onClick:()=>p>1&&h(p-1),disabled:1===p,className:"px-4 py-2 rounded ".concat(1===p?"bg-gray-300 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:"Prev"}),(0,s.jsxs)("span",{children:["Page ",p," of ",g]}),(0,s.jsx)("button",{onClick:()=>p<g&&h(p+1),disabled:p===g,className:"px-4 py-2 rounded ".concat(p===g?"bg-gray-300 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:"Next"})]})]}))}}},e=>{var a=a=>e(e.s=a);e.O(0,[874,108,441,684,358],()=>a(7527)),_N_E=e.O()}]);