(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[381],{5695:(e,t,a)=>{"use strict";var l=a(8999);a.o(l,"redirect")&&a.d(t,{redirect:function(){return l.redirect}}),a.o(l,"usePathname")&&a.d(t,{usePathname:function(){return l.usePathname}}),a.o(l,"useRouter")&&a.d(t,{useRouter:function(){return l.useRouter}}),a.o(l,"useSearchParams")&&a.d(t,{useSearchParams:function(){return l.useSearchParams}})},6654:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return n}});let l=a(2115);function n(e,t){let a=(0,l.useRef)(null),n=(0,l.useRef)(null);return(0,l.useCallback)(l=>{if(null===l){let e=a.current;e&&(a.current=null,e());let t=n.current;t&&(n.current=null,t())}else e&&(a.current=r(e,l)),t&&(n.current=r(t,l))},[e,t])}function r(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let a=e(t);return"function"==typeof a?a:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7527:(e,t,a)=>{Promise.resolve().then(a.bind(a,9594))},9594:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var l=a(5155),n=a(2115),r=a(2108),s=a(6874),i=a.n(s),c=a(5695);let o=["All","Tech","Art","Health","Education"],d=["All","active","completed","canceled","paused"];function u(){var e;let{data:t,status:a}=(0,r.useSession)(),[s,u]=(0,n.useState)([]),[m,f]=(0,n.useState)(!1),[p,x]=(0,n.useState)(1),[h,g]=(0,n.useState)(1),[b,v]=(0,n.useState)("All"),[j,y]=(0,n.useState)("All"),[N,w]=(0,n.useState)(""),[S,k]=(0,n.useState)(""),P=(0,n.useRef)([]),_=(null==t||null==(e=t.user)?void 0:e.id)||"";return((0,n.useEffect)(()=>{let e=setTimeout(()=>{k(N.trim()),x(1)},500);return()=>clearTimeout(e)},[N]),(0,n.useEffect)(()=>{_&&(async()=>{f(!0);let e=new URLSearchParams;e.append("ownerId",_),e.append("page",p.toString()),e.append("limit","9"),"All"!==b&&e.append("category",b),"All"!==j&&e.append("status",j),S&&e.append("search",S);try{let t=await fetch("/api/campaigns?".concat(e.toString()));if(!t.ok)throw Error("Failed to fetch campaigns");let a=await t.json();u(a.campaigns),g(a.totalPages)}catch(e){console.error(e)}finally{f(!1)}})()},[_,p,b,j,S]),"loading"===a)?(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-white",children:(0,l.jsx)("div",{className:"loader"})}):(_||(0,c.redirect)("/signin"),(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-10",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Your Campaigns"}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-4 mb-10",children:[(0,l.jsx)("select",{className:"border rounded px-3 py-2",value:b,onChange:e=>{v(e.target.value),x(1)},children:o.map(e=>(0,l.jsx)("option",{value:e,children:e},e))}),(0,l.jsx)("select",{className:"border rounded px-3 py-2",value:j,onChange:e=>{y(e.target.value),x(1)},children:d.map(e=>(0,l.jsx)("option",{value:e,children:e},e))}),(0,l.jsx)("input",{type:"text",placeholder:"Search campaigns...",className:"border rounded px-3 py-2 flex-grow min-w-[200px]",value:N,onChange:e=>w(e.target.value)})]}),m?(0,l.jsx)("p",{children:"Loading campaigns..."}):0===s.length?(0,l.jsx)("p",{children:"No campaigns found."}):(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-12",children:s.map((e,t)=>{let a=Math.min(100,Math.round(e.amountRaised/e.fundingTarget*100));return(0,l.jsxs)("div",{ref:e=>{e&&(P.current[t]=e)},className:"relative rounded-2xl overflow-hidden shadow-xl text-white h-96 flex flex-col justify-end p-6",style:{backgroundImage:"url('".concat(e.logoUrl||e.image,"')"),backgroundSize:"cover",backgroundPosition:"center"},children:[(0,l.jsx)("div",{className:"bg-gradient-to-t from-black/80 via-black/40 to-transparent absolute inset-0 z-0"}),(0,l.jsxs)("div",{className:"relative z-10 flex flex-col flex-grow justify-end",children:[(0,l.jsx)("p",{className:"font-bold text-xl mb-1",children:e.title}),(0,l.jsx)("p",{className:"text-sm mb-2",children:e.description||e.subtitle||"No description"}),(0,l.jsx)("p",{className:"text-pink-400 text-sm font-semibold mb-1",children:e.platform||"CUSTOM"}),(0,l.jsx)("div",{className:"w-full bg-gray-600 rounded-full h-4 mb-2 overflow-hidden",children:(0,l.jsx)("div",{className:"bg-green-500 h-4 rounded-full transition-all duration-500",style:{width:"".concat(a,"%")}})}),(0,l.jsxs)("p",{className:"text-yellow-300 font-bold text-sm mb-4",children:[a,"% funded"]}),(0,l.jsxs)("p",{className:"text-yellow-300 font-bold text-lg",children:["$ ",e.amountRaised," raised of $",e.fundingTarget]}),(0,l.jsx)(i(),{href:"/dashboard/campaigns/".concat(e._id),className:"mt-4 inline-block bg-yellow-400 text-black px-4 py-2 rounded font-medium text-sm hover:bg-yellow-500 transition",children:"View Details"})]})]},e._id)})}),(0,l.jsxs)("div",{className:"flex justify-center items-center gap-4 mt-12",children:[(0,l.jsx)("button",{onClick:()=>p>1&&x(p-1),disabled:1===p,className:"px-4 py-2 rounded ".concat(1===p?"bg-gray-300 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:"Prev"}),(0,l.jsxs)("span",{children:["Page ",p," of ",h]}),(0,l.jsx)("button",{onClick:()=>p<h&&x(p+1),disabled:p===h,className:"px-4 py-2 rounded ".concat(p===h?"bg-gray-300 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:"Next"})]})]}))}}},e=>{var t=t=>e(e.s=t);e.O(0,[874,108,441,684,358],()=>t(7527)),_N_E=e.O()}]);