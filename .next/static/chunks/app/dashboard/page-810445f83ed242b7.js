(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{3512:(e,a,n)=>{Promise.resolve().then(n.bind(n,4470))},4470:(e,a,n)=>{"use strict";n.d(a,{default:()=>r});var i=n(5155),t=n(2115),l=n(5695),s=n(2108);function r(){let e=(0,l.useRouter)(),{data:a}=(0,s.useSession)(),[n,r]=(0,t.useState)(!1),[o,d]=(0,t.useState)({title:"",description:"",logoFile:null,galleryFiles:[],fundingTarget:"",amountRaised:"0",investorCount:"0",equityOffered:"",preMoneyValuation:"",sharePrice:"",additionalInvestment:"",website:"",companiesHouseLink:"",linkedinLink:"",instagramLink:"",facebookLink:"",sections:[{title:"",description:""}],deadline:"",categories:[""],valueHighlights:[""]}),c=e=>{let{name:a,value:n}=e.target;d(e=>({...e,[a]:n}))},u=(e,a)=>{let n=e.target.files;n&&("galleryFiles"===a?d(e=>({...e,galleryFiles:[...e.galleryFiles,...Array.from(n)]})):d(e=>({...e,logoFile:n[0]||null})))},p=(e,a,n)=>{let i=[...o.sections];i[e][a]=n,d(e=>({...e,sections:i}))},g=()=>{d(e=>({...e,sections:[...e.sections,{title:"",description:""}]}))},m=e=>{d(a=>({...a,sections:a.sections.filter((a,n)=>n!==e)}))},h=(e,a)=>{let n=[...o.categories];n[e]=a,d(e=>({...e,categories:n}))},b=()=>{d(e=>({...e,categories:[...e.categories,""]}))},x=e=>{d(a=>({...a,categories:a.categories.filter((a,n)=>n!==e)}))},f=(e,a)=>{let n=[...o.valueHighlights];n[e]=a,d(e=>({...e,valueHighlights:n}))},v=()=>{d(e=>({...e,valueHighlights:[...e.valueHighlights,""]}))},y=e=>{d(a=>({...a,valueHighlights:a.valueHighlights.filter((a,n)=>n!==e)}))},j=async n=>{var i;if(n.preventDefault(),r(!0),!(null==a||null==(i=a.user)?void 0:i.id)){alert("You must be signed in to create a campaign."),r(!1);return}let t=new FormData;t.append("title",o.title),t.append("description",o.description),t.append("fundingTarget",o.fundingTarget),t.append("equityOffered",o.equityOffered),t.append("preMoneyValuation",o.preMoneyValuation),t.append("sharePrice",o.sharePrice),t.append("additionalInvestment",o.additionalInvestment),t.append("website",o.website),t.append("companiesHouseLink",o.companiesHouseLink),t.append("linkedinLink",o.linkedinLink),t.append("instagramLink",o.instagramLink),t.append("facebookLink",o.facebookLink),t.append("deadline",o.deadline),t.append("amountRaised",o.amountRaised),t.append("investorCount",o.investorCount),t.append("ownerId",a.user.id),o.logoFile&&t.append("logoFile",o.logoFile),o.galleryFiles.forEach(e=>t.append("galleryFiles",e)),t.append("categories",JSON.stringify(o.categories)),t.append("sections",JSON.stringify(o.sections)),t.append("valueHighlights",JSON.stringify(o.valueHighlights));try{if(!(await fetch("/api/campaigns",{method:"POST",body:t})).ok)throw Error("Failed to create campaign");alert("Campaign created successfully!"),e.push("/dashboard"),e.refresh()}catch(e){console.error(e),alert("Error creating campaign")}finally{r(!1)}};return(0,i.jsxs)("form",{onSubmit:j,className:"max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-lg space-y-6",noValidate:!0,children:[(0,i.jsx)("h2",{className:"text-3xl font-bold mb-4 text-center",children:"Create Campaign"}),(0,i.jsx)("input",{name:"title",placeholder:"Campaign Title",value:o.title,onChange:c,className:"input input-bordered w-full",required:!0}),(0,i.jsx)("textarea",{name:"description",placeholder:"Description",value:o.description,onChange:c,className:"input input-bordered w-full min-h-[100px]",required:!0}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block font-semibold mb-1",children:"Logo Upload"}),(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>u(e,"logoFile"),className:"input input-bordered w-full",required:!0}),o.logoFile&&(0,i.jsx)("img",{src:URL.createObjectURL(o.logoFile),alt:"Logo preview",className:"h-24 mt-3 rounded-md object-contain"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsx)("input",{name:"fundingTarget",placeholder:"Funding Target",type:"number",value:o.fundingTarget,onChange:c,className:"input input-bordered",required:!0}),(0,i.jsx)("input",{name:"equityOffered",placeholder:"Equity Offered (%)",type:"number",value:o.equityOffered,onChange:c,className:"input input-bordered",required:!0}),(0,i.jsx)("input",{name:"preMoneyValuation",placeholder:"Pre-money Valuation",type:"number",value:o.preMoneyValuation,onChange:c,className:"input input-bordered",required:!0})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsx)("input",{name:"sharePrice",placeholder:"Share Price",type:"number",value:o.sharePrice,onChange:c,className:"input input-bordered",required:!0}),(0,i.jsx)("input",{name:"additionalInvestment",placeholder:"Additional Investment",type:"number",value:o.additionalInvestment,onChange:c,className:"input input-bordered"}),(0,i.jsx)("input",{name:"deadline",type:"date",value:o.deadline,onChange:c,className:"input input-bordered",required:!0})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsx)("input",{name:"website",placeholder:"Website URL",value:o.website,onChange:c,className:"input input-bordered"}),(0,i.jsx)("input",{name:"companiesHouseLink",placeholder:"Companies House Link",value:o.companiesHouseLink,onChange:c,className:"input input-bordered"}),(0,i.jsx)("input",{name:"linkedinLink",placeholder:"LinkedIn",value:o.linkedinLink,onChange:c,className:"input input-bordered"}),(0,i.jsx)("input",{name:"instagramLink",placeholder:"Instagram",value:o.instagramLink,onChange:c,className:"input input-bordered"}),(0,i.jsx)("input",{name:"facebookLink",placeholder:"Facebook",value:o.facebookLink,onChange:c,className:"input input-bordered"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block font-semibold mb-1",children:"Gallery Image Upload"}),(0,i.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>u(e,"galleryFiles"),className:"input input-bordered w-full"}),o.galleryFiles.length>0&&(0,i.jsx)("div",{className:"grid grid-cols-3 gap-3 mt-3",children:o.galleryFiles.map((e,a)=>(0,i.jsx)("img",{src:URL.createObjectURL(e),alt:"Gallery ".concat(a),className:"h-24 rounded-md object-cover"},a))})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block font-semibold mb-1",children:"Key Highlights"}),o.valueHighlights.map((e,a)=>(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,i.jsx)("input",{type:"text",placeholder:"Highlight",value:e,onChange:e=>f(a,e.target.value),className:"input input-bordered flex-grow"}),(0,i.jsx)("button",{type:"button",onClick:()=>y(a),className:"btn btn-error btn-sm px-3 h-8 rounded","aria-label":"Remove highlight ".concat(a+1),disabled:1===o.valueHighlights.length,children:"−"}),a===o.valueHighlights.length-1&&(0,i.jsx)("button",{type:"button",onClick:v,className:"btn btn-outline btn-sm px-3 h-8 rounded","aria-label":"Add highlight",children:"+"})]},a))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block font-semibold mb-1",children:"Sections"}),o.sections.map((e,a)=>(0,i.jsxs)("div",{className:"border p-4 mb-4 rounded-md",children:[(0,i.jsx)("input",{type:"text",placeholder:"Section Title",value:e.title,onChange:e=>p(a,"title",e.target.value),className:"input input-bordered w-full mb-2",required:!0}),(0,i.jsx)("textarea",{placeholder:"Section Description",value:e.description,onChange:e=>p(a,"description",e.target.value),className:"input input-bordered w-full min-h-[80px]",required:!0}),(0,i.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,i.jsx)("button",{type:"button",onClick:()=>m(a),className:"btn btn-error btn-sm",disabled:1===o.sections.length,children:"Remove Section"}),a===o.sections.length-1&&(0,i.jsx)("button",{type:"button",onClick:g,className:"btn btn-outline btn-sm",children:"Add Section"})]})]},a))]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block font-semibold mb-1",children:"Categories"}),o.categories.map((e,a)=>(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,i.jsx)("input",{type:"text",placeholder:"Category",value:e,onChange:e=>h(a,e.target.value),className:"input input-bordered flex-grow"}),(0,i.jsx)("button",{type:"button",onClick:()=>x(a),className:"btn btn-error btn-sm px-3 h-8 rounded","aria-label":"Remove category ".concat(a+1),disabled:1===o.categories.length,children:"−"}),a===o.categories.length-1&&(0,i.jsx)("button",{type:"button",onClick:b,className:"btn btn-outline btn-sm px-3 h-8 rounded","aria-label":"Add category",children:"+"})]},a))]}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary w-full py-3 text-lg font-semibold ".concat(n?"loading":""),disabled:n,children:n?"Creating...":"Create Campaign"})]})}},5695:(e,a,n)=>{"use strict";var i=n(8999);n.o(i,"redirect")&&n.d(a,{redirect:function(){return i.redirect}}),n.o(i,"usePathname")&&n.d(a,{usePathname:function(){return i.usePathname}}),n.o(i,"useRouter")&&n.d(a,{useRouter:function(){return i.useRouter}}),n.o(i,"useSearchParams")&&n.d(a,{useSearchParams:function(){return i.useSearchParams}})}},e=>{var a=a=>e(e.s=a);e.O(0,[108,441,684,358],()=>a(3512)),_N_E=e.O()}]);