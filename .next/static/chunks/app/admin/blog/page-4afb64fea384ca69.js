(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8563],{1165:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var r=a(5155),s=a(6874),l=a.n(s),i=a(2115),n=a(9946);let o=(0,n.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),c=(0,n.A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),d=(0,n.A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var h=a(2355),u=a(3052);function m(){let[e,t]=(0,i.useState)([]),[a,s]=(0,i.useState)(!0),[n,m]=(0,i.useState)(""),[g,p]=(0,i.useState)(""),[f,x]=(0,i.useState)([]),[y,b]=(0,i.useState)(""),[w,j]=(0,i.useState)(!1),[v,N]=(0,i.useState)(1),[k,A]=(0,i.useState)(1);(0,i.useEffect)(()=>{let e=setTimeout(()=>{p(n)},500);return()=>clearTimeout(e)},[n]);let C=(0,i.useCallback)(async()=>{s(!0);try{let e=new URLSearchParams;g&&e.append("search",g),y&&e.append("category",y),e.append("page",v.toString()),e.append("limit","3");let a=await fetch("/api/blog/list?".concat(e.toString())),r=await a.json();t(r.posts),A(Math.ceil(r.total/3))}catch(e){console.error("Failed to fetch blog posts",e)}finally{s(!1)}},[g,y,v]);(0,i.useEffect)(()=>{C()},[C]),(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/category"),t=await e.json();Array.isArray(t)&&x(t)}catch(e){console.error("Failed to fetch categories",e)}})()},[]);let S=async e=>{if(confirm("Are you sure you want to delete this post?"))try{(await fetch("/api/blog/delete/".concat(e),{method:"DELETE"})).ok?t(t=>t.filter(t=>t._id!==e)):alert("Failed to delete post.")}catch(e){console.error(e),alert("Error deleting post.")}},_=async(a,r)=>{j(!0);try{if(!r&&e.filter(e=>e.featured).length>=6)return void alert("You can only feature up to 6 blog posts.");if(!(await fetch("/api/blog/feature/".concat(a),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({featured:!r})})).ok)return void alert("Failed to update featured status.");t(e=>e.map(e=>e._id===a?{...e,featured:!r}:e))}catch(e){console.error("Feature toggle error:",e),alert("Something went wrong while updating.")}finally{j(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen p-4 sm:p-8 bg-gray-100",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Manage Blog Posts"}),(0,r.jsxs)(l(),{href:"/admin/blog/new",className:"inline-flex items-center bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:[(0,r.jsx)(o,{className:"mr-2 h-5 w-5"}),"Add New Post"]})]}),(0,r.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[(0,r.jsxs)("select",{className:"w-full sm:w-1/4 px-4 py-2 border rounded-lg",value:y,onChange:e=>{b(e.target.value),N(1)},children:[(0,r.jsx)("option",{value:"",children:"All Categories"}),f.map(e=>(0,r.jsx)("option",{value:e._id,children:e.name},e._id))]}),(0,r.jsx)("input",{type:"text",placeholder:"Search by title, author or content...",value:n,onChange:e=>{m(e.target.value),N(1)},className:"w-full sm:w-3/4 px-6 py-3 border rounded-lg"})]}),a?(0,r.jsx)("div",{className:"flex items-center justify-center h-48",children:"Loading..."}):0===e.length?(0,r.jsx)("div",{className:"text-center text-gray-500 py-12",children:"No blog posts found."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded shadow p-4 flex flex-col justify-between",children:[(0,r.jsx)("img",{src:e.coverImage,alt:e.title,className:"rounded-md h-40 w-full object-cover mb-3"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:e.title}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mb-1",children:["By ",e.author," • ",new Date(e.createdAt).toLocaleDateString()]}),(0,r.jsx)("div",{className:"mb-2",children:(0,r.jsx)("button",{onClick:()=>_(e._id,e.featured),disabled:w,className:"flex items-center justify-center gap-2 px-4 py-1.5 rounded-full text-sm font-medium transition duration-200 shadow-sm ".concat(e.featured?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.featured?"★ Featured":"☆ Mark as Featured"})}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsxs)(l(),{href:"/admin/blog/".concat(e._id),className:"text-blue-600 hover:underline inline-flex items-center",children:[(0,r.jsx)(c,{className:"w-4 h-4 mr-1"})," Edit"]}),(0,r.jsxs)("button",{onClick:()=>S(e._id),className:"text-red-600 hover:underline inline-flex items-center",children:[(0,r.jsx)(d,{className:"w-4 h-4 mr-1"})," Delete"]})]})]},e._id))}),(0,r.jsxs)("div",{className:"flex justify-center items-center gap-4 mt-8",children:[(0,r.jsx)("button",{onClick:()=>N(e=>Math.max(1,e-1)),disabled:1===v,className:"px-3 py-1 border rounded hover:bg-gray-200 disabled:opacity-50",children:(0,r.jsx)(h.A,{})}),(0,r.jsxs)("span",{className:"font-medium text-gray-600",children:["Page ",v," of ",k]}),(0,r.jsx)("button",{onClick:()=>N(e=>Math.min(k,e+1)),disabled:v===k,className:"px-3 py-1 border rounded hover:bg-gray-200 disabled:opacity-50",children:(0,r.jsx)(u.A,{})})]})]})]})}},1449:(e,t,a)=>{Promise.resolve().then(a.bind(a,1165))},2355:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},3052:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},9946:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var r=a(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),i=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:d="",children:h,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...c,width:s,height:s,stroke:a,strokeWidth:i?24*Number(l)/Number(s):l,className:n("lucide",d),...!h&&!o(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(h)?h:[h]])}),h=(e,t)=>{let a=(0,r.forwardRef)((a,l)=>{let{className:o,...c}=a;return(0,r.createElement)(d,{ref:l,iconNode:t,className:n("lucide-".concat(s(i(e))),"lucide-".concat(e),o),...c})});return a.displayName=i(e),a}}},e=>{var t=t=>e(e.s=t);e.O(0,[6874,8441,1684,7358],()=>t(1449)),_N_E=e.O()}]);